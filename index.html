<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Programme TV ce soir</title>
<style>
body { font-family: -apple-system, sans-serif; padding: 1em; }
.channel { margin-bottom: 1em; }
.title { font-weight: bold; }
</style>
</head>
<body>

<h1>ðŸ“º Ce soir Ã  la TV kkej</h1>
<div id="tv"></div>

<script>
const today = new Date().toISOString().split("T")[0];
const url = `https://api.tvmaze.com/schedule?country=FR&date=${today}`;

fetch(url)
  .then(r => r.json())
  .then(data => {
    console.log("TOTAL PROGRAMMES :", data.length);

    const container = document.getElementById("tv");

    if (data.length === 0) {
      container.innerHTML = "âŒ Aucun programme trouvÃ© pour aujourd'hui";
      return;
    }

    const evening = data.filter(p =>
      p.airtime &&
      p.airtime >= "20:30"
    );

    evening.slice(0, 20).forEach(p => {
      const channel =
        (p.network && p.network.name) ||
        (p.webChannel && p.webChannel.name) ||
        "ChaÃ®ne inconnue";

      const div = document.createElement("div");
      div.innerHTML = `
        <strong>${p.airtime}</strong> â€” ${p.show.name}<br>
        <em>${channel}</em><br><br>
      `;
      container.appendChild(div);
    });
  })
  .catch(err => {
    document.getElementById("tv").innerText =
      "Erreur API : " + err;
  });
</script>

</body>
</html>
