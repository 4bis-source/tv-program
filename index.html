<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Programme TV ce soir</title>
<style>
body { font-family: -apple-system, sans-serif; padding: 1em; }
.channel { margin-bottom: 1em; }
.title { font-weight: bold; }
</style>
</head>
<body>

<h1>ðŸ“º Ce soir Ã  la TV</h1>
<div id="tv"></div>

<script>
const CHAINS = [
  "TF1", "France 2", "France 3", "M6", "Arte",
  "C8", "W9", "TMC", "TFX", "RMC Story"
];

fetch("https://api.tvmaze.com/schedule?country=FR")
  .then(r => r.json())
  .then(data => {
    const container = document.getElementById("tv");

    const evening = data.filter(p => {
      const channel =
        (p.network && p.network.name) ||
        (p.webChannel && p.webChannel.name);

      return (
        channel &&
        CHAINS.includes(channel) &&
        p.airtime >= "20:30"
      );
    });

    if (evening.length === 0) {
      container.innerHTML = "âŒ Aucun programme trouvÃ©";
      return;
    }

    evening.forEach(p => {
      const channel =
        (p.network && p.network.name) ||
        (p.webChannel && p.webChannel.name);

      const div = document.createElement("div");
      div.className = "channel";
      div.innerHTML = `
        <div class="title">${channel} â€“ ${p.airtime}</div>
        <div>${p.show.name}</div>
      `;
      container.appendChild(div);
    });
  })
  .catch(err => {
    document.getElementById("tv").innerText =
      "Erreur API : " + err;
  });
</script>


</body>
</html>
